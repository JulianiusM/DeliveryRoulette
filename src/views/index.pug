//- views/index.pug – Landing Page for DeliveryRoulette
extends layout

block meta
    title DeliveryRoulette – Discover your next favorite delivery
    meta(
        name="description"
        content="DeliveryRoulette helps you discover restaurants, manage dietary preferences, and get random delivery suggestions."
    )
    meta(
        name="keywords"
        content="restaurants, delivery, food, suggestions, diet, preferences, lieferando"
    )
    meta(name="author" content="DeliveryRoulette")
    meta(property="og:title" content="DeliveryRoulette – Discover your next favorite delivery")
    meta(
        property="og:description"
        content="Manage restaurants, sync menus from delivery providers, track dietary preferences, and get random suggestions for your team."
    )
    meta(property="og:image" content="/img/logo.png")
    meta(property="og:url" content=settings.rootUrl)
    meta(name="twitter:card" content="summary_large_image")

block title
    //- Card header
    h1.card-header.text-center.py-3.mb-0
        i.bi.bi-shuffle.me-2
        | DeliveryRoulette

block content
    //- Hero section
    if user
        .text-center.mb-4
            p.lead.mb-3
                | Welcome back, 
                span.text-info #{user.name || user.username}
                | !
            p.text-white-50.mb-4 Your team's delivery restaurant management and suggestion system.

        //- Quick action buttons for logged-in users
        .row.g-3.mb-5
            .col-md-3.col-sm-6
                a.card.text-bg-dark.border-primary.h-100.text-decoration-none.hover-lift(href="/restaurants")
                    .card-body.text-center.py-4
                        i.bi.bi-shop.fs-1.text-primary.mb-3
                        h3.h5.mb-2 Restaurants
                        p.small.text-white-50.mb-0 View & manage restaurants
            .col-md-3.col-sm-6
                a.card.text-bg-dark.border-success.h-100.text-decoration-none.hover-lift(href="/suggest")
                    .card-body.text-center.py-4
                        i.bi.bi-shuffle.fs-1.text-success.mb-3
                        h3.h5.mb-2 Suggest
                        p.small.text-white-50.mb-0 Get a random restaurant pick
            .col-md-3.col-sm-6
                a.card.text-bg-dark.border-info.h-100.text-decoration-none.hover-lift(href="/import")
                    .card-body.text-center.py-4
                        i.bi.bi-upload.fs-1.text-info.mb-3
                        h3.h5.mb-2 Import
                        p.small.text-white-50.mb-0 Bulk import restaurants
            .col-md-3.col-sm-6
                a.card.text-bg-dark.border-warning.h-100.text-decoration-none.hover-lift(href="/providers")
                    .card-body.text-center.py-4
                        i.bi.bi-plug.fs-1.text-warning.mb-3
                        h3.h5.mb-2 Providers
                        p.small.text-white-50.mb-0 Sync from Lieferando

    else
        .text-center.mb-4
            p.lead.mb-3 
                | Your team's 
                span.text-info delivery restaurant
                |  suggestion system
            p.text-white-50.mb-4
                | Manage restaurants, sync menus from delivery providers, track dietary preferences, and get random suggestions.

        .d-flex.flex-wrap.justify-content-center.gap-3.mb-5
            a.btn.btn-primary.btn-lg.px-4.d-inline-flex.align-items-center.gap-2(href="/users/register")
                i.bi.bi-person-plus
                | Create Account
            a.btn.btn-outline-light.btn-lg.px-4.d-inline-flex.align-items-center.gap-2(href="/users/login")
                i.bi.bi-box-arrow-in-right
                | Log In

    //- Divider
    .position-relative.text-center.my-5
        hr
        span.position-absolute.top-50.start-50.translate-middle.px-3.bg-dark.rounded-pill.border.border-secondary.text-info.small
            i.bi.bi-stars.me-1
            | All Features

    //- Main feature grid
    .row.row-cols-1.row-cols-md-2.row-cols-xl-3.g-4.mb-5
        //- Restaurants
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-primary.rounded-circle.p-3.me-3
                            i.bi.bi-shop.fs-4.text-white
                        div
                            h2.h5.mb-0 Restaurants
                            p.small.text-white-50.mb-0 Full restaurant management
                    ul.small.mb-0.text-white-50
                        li Name, address, city, active status
                        li Favorite and exclude restaurants
                        li Provider references (Lieferando)
                        li Diet suitability per restaurant
                        li Search and filter by name or city
                    if user
                        a.btn.btn-sm.btn-outline-primary.mt-3(href="/restaurants") View Restaurants →

        //- Suggestions
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-success.rounded-circle.p-3.me-3
                            i.bi.bi-shuffle.fs-4.text-white
                        div
                            h2.h5.mb-0 Random Suggestions
                            p.small.text-white-50.mb-0 Can't decide where to order?
                    ul.small.mb-0.text-white-50
                        li Diet-aware random picks
                        li Cuisine include/exclude filters
                        li Respects favorites & exclusions
                        li Shows candidate count
                        li Suggestion history tracking
                    if user
                        a.btn.btn-sm.btn-outline-success.mt-3(href="/suggest") Get Suggestion →

        //- Diet Preferences
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-info.rounded-circle.p-3.me-3
                            i.bi.bi-heart-pulse.fs-4.text-white
                        div
                            h2.h5.mb-0 Diet Preferences
                            p.small.text-white-50.mb-0 Dietary tracking per user
                    ul.small.mb-0.text-white-50
                        li Vegetarian, vegan, gluten-free, etc.
                        li Auto-detect from menu keywords
                        li Manual overrides when needed
                        li Per-user diet tag selections
                        li Group-compatible suggestions
                    if user
                        a.btn.btn-sm.btn-outline-info.mt-3(href="/users/settings") Set Preferences →

        //- Provider Sync
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-warning.rounded-circle.p-3.me-3
                            i.bi.bi-plug.fs-4.text-dark
                        div
                            h2.h5.mb-0 Provider Sync
                            p.small.text-white-50.mb-0 Lieferando integration
                    ul.small.mb-0.text-white-50
                        li Sync restaurants from listing URLs
                        li Import single restaurant by URL
                        li Auto-import menus and prices
                        li Stale restaurant detection
                        li Diet override conflict alerts
                    if user
                        a.btn.btn-sm.btn-outline-warning.mt-3(href="/providers") Manage Providers →

        //- Import
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-danger.rounded-circle.p-3.me-3
                            i.bi.bi-upload.fs-4.text-white
                        div
                            h2.h5.mb-0 Bulk Import
                            p.small.text-white-50.mb-0 JSON & CSV upload
                    ul.small.mb-0.text-white-50
                        li Upload restaurant data files
                        li Preview with diff badges
                        li New/Updated/Unchanged status
                        li Apply or discard changes
                        li Per-restaurant result reporting
                    if user
                        a.btn.btn-sm.btn-outline-danger.mt-3(href="/import") Import Data →

        //- Help & Documentation
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body
                    .d-flex.align-items-center.mb-3
                        .bg-secondary.rounded-circle.p-3.me-3
                            i.bi.bi-question-circle.fs-4.text-white
                        div
                            h2.h5.mb-0 Help & Docs
                            p.small.text-white-50.mb-0 Complete user guides
                    ul.small.mb-0.text-white-50
                        li Getting started guides
                        li Feature documentation
                        li Diet detection explained
                        li Tips & best practices
                        li Troubleshooting help
                    a.btn.btn-sm.btn-outline-secondary.mt-3(href="/help") View Documentation →

    if !user
        //- Call to action for non-logged users
        .text-center.mt-5.mb-4
            .card.text-bg-dark.border-primary.p-4
                h3.h4.mb-3
                    i.bi.bi-rocket-takeoff.me-2
                    | Ready to find your next meal?
                p.text-white-50.mb-4 Join now and start managing your team's delivery restaurants.
                .d-flex.flex-wrap.justify-content-center.gap-3
                    a.btn.btn-primary.btn-lg.px-4(href="/users/register")
                        i.bi.bi-person-plus.me-2
                        | Create Free Account
                    a.btn.btn-outline-light.btn-lg.px-4(href="/help")
                        i.bi.bi-book.me-2
                        | Learn More

block scripts
    style.
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        }
