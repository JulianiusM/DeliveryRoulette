extends ../layout

block title
    .card-header
        h4.mb-0
            i.bi.bi-plug.me-2
            | Provider Settings

block content
    if data.providers && data.providers.length > 0
        each provider in data.providers
            .card.bg-dark.text-white.mb-4
                .card-header
                    h5.mb-0
                        i.bi.bi-shop.me-2
                        = provider.displayName

                .card-body
                    //- Listing URL sync (if supported)
                    if provider.capabilities.canDiscoverFromListingUrl
                        h6.text-white
                            i.bi.bi-geo-alt.me-1
                            | Discovery – Listing URL
                        p.text-white-50 Paste a delivery area listing URL to discover restaurants.
                        form(method="POST" action=`/providers/${provider.providerKey}/sync`)
                            .mb-3
                                label.form-label(for=`listingUrl-${provider.providerKey}`)= provider.capabilities.listingUrlLabel || 'Listing URL'
                                input.form-control.bg-dark.text-white.border-secondary(
                                    type="url"
                                    id=`listingUrl-${provider.providerKey}`
                                    name="listingUrl"
                                    placeholder=provider.capabilities.listingUrlPlaceholder || 'https://...'
                                    value=provider.listingUrl
                                    required
                                )
                            button.btn.btn-primary(type="submit")
                                i.bi.bi-arrow-repeat.me-1
                                | Sync

                        if provider.capabilities.canImportFromUrl
                            hr.border-secondary

                    //- Import from URL (if supported)
                    if provider.capabilities.canImportFromUrl
                        h6.text-white
                            i.bi.bi-link-45deg.me-1
                            | Import – Paste Restaurant URL
                        p.text-white-50 Paste a restaurant menu URL to import a single restaurant.
                        form(method="POST" action=`/providers/${provider.providerKey}/import-url`)
                            .mb-3
                                label.form-label(for=`menuUrl-${provider.providerKey}`)= provider.capabilities.importUrlLabel || 'Restaurant URL'
                                input.form-control.bg-dark.text-white.border-secondary(
                                    type="url"
                                    id=`menuUrl-${provider.providerKey}`
                                    name="menuUrl"
                                    placeholder=provider.capabilities.importUrlPlaceholder || 'https://...'
                                    required
                                )
                            button.btn.btn-success(type="submit")
                                i.bi.bi-download.me-1
                                | Import Restaurant
    else
        .card.bg-dark.text-white
            .card-body
                p.text-white-50.mb-0 No provider connectors with configuration options are currently registered.
