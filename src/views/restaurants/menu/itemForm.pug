//- views/restaurants/menu/itemForm.pug – Create / Edit Menu Item
extends ../../layout

block meta
    if data && data.editing
        title Edit Item | DeliveryRoulette
    else
        title New Item | DeliveryRoulette

block title
    h1.card-header.text-center
        i.bi.bi-cup-hot.me-2
        if data && data.editing
            | Edit Item
        else
            | New Item

block content
    - const d = data || {}
    - const editing = d.editing || false
    - const restaurantId = d.restaurantId
    - const categoryId = d.categoryId
    - const formAction = editing ? `/restaurants/${restaurantId}/menu/items/${d.id}/edit` : `/restaurants/${restaurantId}/menu/categories/${categoryId}/items/new`

    form.row.gy-3(action=formAction method="post")
        //── Name ────────────────────────────────────────
        .col-md-6
            label.form-label.mb-1(for="name")
                i.bi.bi-cup-hot.me-1
                | Name&nbsp;*
            input#name.form-control.text-bg-dark(
                type="text"
                name="name"
                maxlength="150"
                value=(d.name || '')
                placeholder="Item name"
                required)

        //── Description ────────────────────────────────
        .col-md-6
            label.form-label.mb-1(for="description")
                i.bi.bi-card-text.me-1
                | Description
            input#description.form-control.text-bg-dark(
                type="text"
                name="description"
                maxlength="500"
                value=(d.description || '')
                placeholder="Brief description")

        //── Price ───────────────────────────────────────
        .col-md-4
            label.form-label.mb-1(for="price")
                i.bi.bi-currency-dollar.me-1
                | Price
            input#price.form-control.text-bg-dark(
                type="number"
                name="price"
                step="0.01"
                min="0"
                value=(d.price != null ? d.price : '')
                placeholder="0.00")

        //── Currency ───────────────────────────────────
        .col-md-4
            label.form-label.mb-1(for="currency")
                i.bi.bi-cash.me-1
                | Currency
            input#currency.form-control.text-bg-dark(
                type="text"
                name="currency"
                maxlength="3"
                value=(d.currency || '')
                placeholder="EUR")

        //── Sort Order ─────────────────────────────────
        .col-md-4
            label.form-label.mb-1(for="sortOrder")
                i.bi.bi-sort-numeric-down.me-1
                | Sort Order
            input#sortOrder.form-control.text-bg-dark(
                type="number"
                name="sortOrder"
                value=(d.sortOrder != null ? d.sortOrder : 0)
                placeholder="0")

        //── Active ────────────────────────────────────
        if editing
            .col-12
                .form-check
                    input#isActive.form-check-input(
                        type="checkbox"
                        name="isActive"
                        checked=d.isActive)
                    label.form-check-label(for="isActive") Active

        //── Buttons ──────────────────────────────────
        .col-12.d-flex.gap-2.mt-2
            button.btn.btn-success(type="submit")
                i.bi.bi-check-lg.me-1
                if editing
                    | Save Changes
                else
                    | Add Item
            a.btn.btn-outline-light(href=`/restaurants/${restaurantId}`)
                i.bi.bi-x-lg.me-1
                | Cancel
