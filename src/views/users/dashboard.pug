//- views/users/dashboard.pug â€“ DeliveryRoulette User Dashboard
extends ../layout

block meta
    title Dashboard | DeliveryRoulette

block title
    h1.card-header.text-center.py-3
        i.bi.bi-speedometer2.me-2
        | Welcome, #{user.name || user.username}!

block content
    - const restaurantCount = (data && data.restaurantCount) || 0
    - const suggestionCount = (data && data.suggestionCount) || 0
    - const syncAlertCount = (data && data.syncAlertCount) || 0
    - const dietTagCount = (data && data.dietTagCount) || 0
    - const preferences = (data && data.preferences) || {}

    //- Stats cards
    .row.row-cols-2.row-cols-md-4.g-3.mb-4
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body.text-center
                    h2.display-4.mb-1 #{restaurantCount}
                    p.text-white-50.mb-0
                        i.bi.bi-shop.me-1
                        | Restaurants
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body.text-center
                    h2.display-4.mb-1 #{suggestionCount}
                    p.text-white-50.mb-0
                        i.bi.bi-shuffle.me-1
                        | Suggestions
        .col
            .card.h-100.text-bg-dark.border-secondary
                .card-body.text-center
                    h2.display-4.mb-1 #{dietTagCount}
                    p.text-white-50.mb-0
                        i.bi.bi-heart-pulse.me-1
                        | Diet Tags
        .col
            .card.h-100.text-bg-dark.border-secondary(class=syncAlertCount > 0 ? 'border-warning' : '')
                .card-body.text-center
                    h2.display-4.mb-1(class=syncAlertCount > 0 ? 'text-warning' : '') #{syncAlertCount}
                    p.mb-0(class=syncAlertCount > 0 ? 'text-warning' : 'text-white-50')
                        i.bi.bi-bell.me-1
                        | Sync Alerts

    //- Quick actions
    .d-flex.flex-wrap.justify-content-center.gap-2.mb-4
        a.btn.btn-primary.d-inline-flex.align-items-center.gap-2(href="/restaurants")
            i.bi.bi-shop
            | Restaurants
        a.btn.btn-outline-light.d-inline-flex.align-items-center.gap-2(href="/suggest")
            i.bi.bi-shuffle
            | Get Suggestion
        a.btn.btn-outline-light.d-inline-flex.align-items-center.gap-2(href="/import")
            i.bi.bi-upload
            | Import
        a.btn.btn-outline-light.d-inline-flex.align-items-center.gap-2(href="/providers")
            i.bi.bi-plug
            | Providers

    //- User preferences summary
    if preferences.deliveryArea || preferences.cuisineIncludes || preferences.cuisineExcludes
        .card.text-bg-dark.border-secondary.mb-4
            .card-header.d-flex.justify-content-between.align-items-center
                span
                    i.bi.bi-gear.me-2
                    | Your Preferences
                a.btn.btn-sm.btn-outline-light(href="/users/settings")
                    i.bi.bi-pencil.me-1
                    | Edit
            .card-body
                .row
                    if preferences.deliveryArea
                        .col-md-4
                            strong.text-white-50
                                i.bi.bi-geo-alt.me-1
                                | Delivery Area
                            p.mb-0 #{preferences.deliveryArea}
                    if preferences.cuisineIncludes
                        .col-md-4
                            strong.text-white-50
                                i.bi.bi-hand-thumbs-up.me-1
                                | Preferred Cuisines
                            p.mb-0 #{preferences.cuisineIncludes}
                    if preferences.cuisineExcludes
                        .col-md-4
                            strong.text-white-50
                                i.bi.bi-hand-thumbs-down.me-1
                                | Excluded Cuisines
                            p.mb-0 #{preferences.cuisineExcludes}

block scripts
    //- No custom JS needed for dashboard